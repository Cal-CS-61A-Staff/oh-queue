{% macro render_ticket_row(ticket) -%}
<div class="queue-ticket row staff-link"
     id="queue-ticket-{{ ticket.id }}"
     data-link="{{ url_for('ticket', ticket_id=ticket.id) }}">
  <div class="two columns">{{ ticket.user.name }}</div>
  <div class="two columns">{{ ticket.created | datetime }}</div>
  <div class="two columns">{{ ticket.location }}</div>
  <div class="two columns">{{ ticket.assignment }}</div>
  <div class="two columns">{{ ticket.question }}</div>
  {% if ticket.status == TicketStatus.pending %}
    <div class="two columns">Queued</div>
  {% elif ticket.status == TicketStatus.assigned %}
    <div class="two columns user-{{ ticket.helper_id }}-hidden">Being helped by {{ ticket.helper.name }}</div>
    <div class="two columns hidden user-{{ ticket.helper_id }}-visible">Assigned to you</div>
  {% endif %}
</div>
{%- endmacro %}

{% macro render_ticket(ticket) -%}
<div id="ticket" class="container">
  <a href="{{ url_for('index') }}">View Queue</a>
  <div class="row">Name: <span class="name">{{ ticket.user.name }}</span></div>
  <div class="row">Queue Time: <span class="created">{{ ticket.created | datetime }}</span></div>
  <div class="row">Location: <span class="location">{{ ticket.location }}</span></div>
  <div class="row">Assignment: <span class="assignment">{{ ticket.assignment }}</span></div>
  <div class="row">Question: <span class="question">{{ ticket.question }}</span></div>
  <div class="row">
  {% if ticket.status == TicketStatus.pending %}
    <div class="twelve columns">
      <button data-url="{{ url_for('assign', ticket_id=ticket.id) }}"
              class="btn staff-only">Help</button>
    </div>
    <div class="twelve columns">
      <button data-url="{{ url_for('delete', ticket_id=ticket.id) }}"
              data-confirm="Delete this ticket?"
              class="btn delete">Delete</button>
    </div>
  {% elif ticket.status == TicketStatus.assigned %}
    <div class="twelve columns hidden user-{{ ticket.helper_id }}-visible">
      <button data-url="{{ url_for('unassign', ticket_id=ticket.id) }}">Put Back</button>
    </div>
    <div class="twelve columns hidden user-{{ ticket.helper_id }}-visible">
      <button data-url="{{ url_for('resolve', ticket_id=ticket.id) }}">
        Resolve
      </button>
    </div>
    <div class="twelve columns hidden user-{{ ticket.helper_id }}-visible">
      <button data-url="{{ url_for('resolve', ticket_id=ticket.id) }}"
              data-redirect="{{ url_for('next_ticket') }}">Resolve and Next</button>
    </div>
    <div class="twelve columns user-{{ ticket.helper_id }}-hidden">Being helped by {{ ticket.helper.name }}</div>
    <div class="twelve columns user-{{ ticket.helper_id }}-hidden staff-only">
        <button data-url="{{ url_for('assign', ticket_id=ticket.id) }}"
                data-confirm="Reassign this ticket?">Reassign</button>
    </div>
    <div class="twelve columns user-{{ ticket.helper_id }}-hidden staff-only">
      <a href="{{ url_for('next_ticket') }}" class="button">Next Ticket</a>
    </div>
  {% elif ticket.status == TicketStatus.resolved %}
    <div class="twelve columns">Resolved</div>
    <div class="twelve columns staff-only">
      <a href="{{ url_for('next_ticket') }}" class="button">Next Ticket</a>
    </div>
  {% elif ticket.status == TicketStatus.deleted %}
    <div class="twelve columns">Deleted</div>
    <div class="twelve columns staff-only">
      <a href="{{ url_for('next_ticket') }}" class="button">Next Ticket</a>
    </div>
  {% endif %}
  </div>
</div>
{%- endmacro %}
